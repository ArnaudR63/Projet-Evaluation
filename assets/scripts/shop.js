const filters=document.querySelectorAll(".filter input"),productsContainer=document.getElementById("products_container"),filterTitle=document.querySelector("#filters_list>h2");function fetchFilteredProducts(){const e=Array.from(filters).filter((e=>e.checked)).map((e=>e.name)),t=new FormData;t.append("categories",JSON.stringify(e)),fetch("filter_products.php",{method:"POST",body:t}).then((e=>e.text())).then((e=>{productsContainer.innerHTML=e})).catch((e=>{}))}filters.forEach((e=>{e.addEventListener("change",fetchFilteredProducts)})),document.getElementById("reset").addEventListener("click",(()=>{let e=0;const t=new URL(window.location);t.searchParams.delete("category"),window.history.replaceState({},"",t),filters.forEach((t=>{!0===t.checked&&e++,t.checked=!1})),e>0&&fetchFilteredProducts()})),window.innerWidth<=980&&filterTitle&&filterTitle.addEventListener("click",(function(){filterTitle.parentElement.classList.toggle("open")}));